!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(c,a,a.document)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery"),a,a.document):b(jQuery,a,a.document)}("undefined"!=typeof window?window:this,function(a,b,c,d){"use strict";function e(){return w.height()+I.offset}function f(c,d,f,g){if(t===c&&(f=!1),!0===B)return!0;if(p[c]){if(y=!1,f&&I.before(c,q),u=1,G=o[c],!1===E&&t>c&&!1===g&&r[c]&&(k=e(),u=parseInt(q[c].outerHeight()/k),G=parseInt(o[c])+(q[c].outerHeight()-k)),I.updateHash&&I.sectionName&&(!0!==E||0!==c))if(history.pushState)try{history.replaceState(null,null,p[c])}catch(a){b.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else b.location.hash=p[c];if(E&&(I.afterRender(),E=!1),t=c,d)a(I.target).stop().scrollTop(G),f&&I.after(c,q);else{if(z=!0,a().velocity?a(I.target).stop().velocity("scroll",{duration:I.scrollSpeed,easing:I.easing,offset:G,mobileHA:!1}):a(I.target).stop().animate({scrollTop:G},I.scrollSpeed,I.easing),b.location.hash.length&&I.sectionName&&b.console)try{a(b.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(a){}a(I.target).promise().done(function(){z=!1,E=!1,f&&I.after(c,q)})}}}function g(a){function b(b){for(var c=0,d=a.slice(Math.max(a.length-b,1)),e=0;e<d.length;e++)c+=d[e];return Math.ceil(c/b)}return b(10)>=b(70)}function h(a,b){for(var c=p.length;c>=0;c--)"string"==typeof a?p[c]===a&&(s=c,f(c,b,!0,!0)):c===a&&(s=c,f(c,b,!0,!0))}var i,j,k,l,m,n,o=[],p=[],q=[],r=[],s=0,t=0,u=1,v=!1,w=a(b),x=w.scrollTop(),y=!1,z=!1,A=!1,B=!1,C=[],D=(new Date).getTime(),E=!0,F=!1,G=0,H="onwheel"in c?"wheel":c.onmousewheel!==d?"mousewheel":"DOMMouseScroll",I={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},J=function(d){function h(b){a().velocity?a(I.target).stop().velocity("scroll",{duration:I.scrollSpeed,easing:I.easing,offset:b,mobileHA:!1}):a(I.target).stop().animate({scrollTop:b},I.scrollSpeed,I.easing)}function t(b){b&&(x=w.scrollTop());var c=I.section;r=[],I.interstitialSection.length&&(c+=","+I.interstitialSection),!1===I.scrollbars&&(I.overflowScroll=!1),k=e(),a(c).each(function(b){var c=a(this);I.setHeights?c.is(I.interstitialSection)?r[b]=!1:c.css("height","auto").outerHeight()<k||"hidden"===c.css("overflow")?(c.css({height:k}),r[b]=!1):(c.css({height:c.height()}),I.overflowScroll?r[b]=!0:r[b]=!1):c.outerHeight()<k||!1===I.overflowScroll?r[b]=!1:r[b]=!0}),b&&w.scrollTop(x)}function E(c,d){var e=I.section;I.interstitialSection.length&&(e+=","+I.interstitialSection),o=[],p=[],q=[],a(e).each(function(c){var d=a(this);o[c]=c>0?parseInt(d.offset().top)+I.offset:parseInt(d.offset().top),I.sectionName&&d.data(I.sectionName)?p[c]="#"+d.data(I.sectionName).toString().replace(/ /g,"-"):!1===d.is(I.interstitialSection)?p[c]="#"+(c+1):(p[c]="#",c===a(e).length-1&&c>1&&(o[c]=o[c-1]+(parseInt(a(a(e)[c-1]).outerHeight())-parseInt(a(b).height()))+parseInt(d.outerHeight()))),q[c]=d;try{a(p[c]).length&&b.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(a){}b.location.hash===p[c]&&(s=c,v=!0)}),!0===c&&f(s,!1,!1,!1)}function G(){return!r[s]||!((x=w.scrollTop())>parseInt(o[s]))}function J(){return!r[s]||(x=w.scrollTop(),k=e(),!(x<parseInt(o[s])+(q[s].outerHeight()-k)-28))}F=!0,a.easing.easeOutExpo=function(a,b,c,d,e){return b==e?c+d:d*(1-Math.pow(2,-10*b/e))+c},l={handleMousedown:function(){if(!0===B)return!0;y=!1,A=!1},handleMouseup:function(){if(!0===B)return!0;y=!0,A&&l.calculateNearest(!1,!0)},handleScroll:function(){if(!0===B)return!0;i&&clearTimeout(i),i=setTimeout(function(){if(A=!0,!1===y)return!1;y=!1,l.calculateNearest(!1,!0)},200)},calculateNearest:function(a,b){x=w.scrollTop();for(var c,d=1,e=o.length,g=0,h=Math.abs(o[0]-x);d<e;d++)(c=Math.abs(o[d]-x))<h&&(h=c,g=d);(J()&&g>s||G())&&(s=g,f(g,a,b,!1))},wheelHandler:function(c){if(!0===B)return!0;if(I.standardScrollElements&&(a(c.target).is(I.standardScrollElements)||a(c.target).closest(I.standardScrollElements).length))return!0;r[s]||c.preventDefault();var d=(new Date).getTime();c=c||b.event;var e=c.originalEvent.wheelDelta||-c.originalEvent.deltaY||-c.originalEvent.detail,h=Math.max(-1,Math.min(1,e));if(C.length>149&&C.shift(),C.push(Math.abs(e)),d-D>200&&(C=[]),D=d,z)return!1;if(h<0){if(s<o.length-1&&J()){if(!g(C))return!1;c.preventDefault(),s++,z=!0,f(s,!1,!0,!1)}}else if(h>0&&s>0&&G()){if(!g(C))return!1;c.preventDefault(),s--,z=!0,f(s,!1,!0,!1)}},keyHandler:function(a){return!0===B||!1===c.activeElement.readOnly||!0!==z&&void(38==a.keyCode||33==a.keyCode?s>0&&G()&&(a.preventDefault(),s--,f(s,!1,!0,!1)):40!=a.keyCode&&34!=a.keyCode||s<o.length-1&&J()&&(a.preventDefault(),s++,f(s,!1,!0,!1)))},init:function(){I.scrollbars?(w.on("mousedown",l.handleMousedown),w.on("mouseup",l.handleMouseup),w.on("scroll",l.handleScroll)):a("body").css({overflow:"hidden"}),w.on(H,l.wheelHandler),w.on("keydown",l.keyHandler)}},m={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(b){if(!0===B)return!0;if(I.standardScrollElements&&(a(b.target).is(I.standardScrollElements)||a(b.target).closest(I.standardScrollElements).length))return!0;var c;if(void 0!==b&&void 0!==b.touches)switch(c=b.touches[0],b.type){case"touchstart":m.touches.touchstart.y=c.pageY,m.touches.touchmove.y=-1,m.touches.touchstart.x=c.pageX,m.touches.touchmove.x=-1,m.options.timeStamp=(new Date).getTime(),m.touches.touchend=!1;case"touchmove":m.touches.touchmove.y=c.pageY,m.touches.touchmove.x=c.pageX,m.touches.touchstart.y!==m.touches.touchmove.y&&Math.abs(m.touches.touchstart.y-m.touches.touchmove.y)>Math.abs(m.touches.touchstart.x-m.touches.touchmove.x)&&(b.preventDefault(),m.touches.direction="y",m.options.timeStamp+m.options.timeGap<(new Date).getTime()&&0==m.touches.touchend&&(m.touches.touchend=!0,m.touches.touchstart.y>-1&&Math.abs(m.touches.touchmove.y-m.touches.touchstart.y)>m.options.distance&&(m.touches.touchstart.y<m.touches.touchmove.y?m.up():m.down())));break;case"touchend":!1===m.touches[b.type]&&(m.touches[b.type]=!0,m.touches.touchstart.y>-1&&m.touches.touchmove.y>-1&&"y"===m.touches.direction&&(Math.abs(m.touches.touchmove.y-m.touches.touchstart.y)>m.options.distance&&(m.touches.touchstart.y<m.touches.touchmove.y?m.up():m.down()),m.touches.touchstart.y=-1,m.touches.touchstart.x=-1,m.touches.direction="undetermined"))}},down:function(){s<o.length&&(J()&&s<o.length-1?(s++,f(s,!1,!0,!1)):(k=e(),Math.floor(q[s].height()/k)>u?(h(parseInt(o[s])+k*u),u+=1):h(parseInt(o[s])+(q[s].outerHeight()-k))))},up:function(){s>=0&&(G()&&s>0?(s--,f(s,!1,!0,!1)):u>2?(k=e(),u-=1,h(parseInt(o[s])+k*u)):(u=1,h(parseInt(o[s]))))},init:function(){c.addEventListener&&I.touchScroll&&(c.addEventListener("touchstart",m.touchHandler,!1),c.addEventListener("touchmove",m.touchHandler,!1),c.addEventListener("touchend",m.touchHandler,!1))}},n={refresh:function(a,b){clearTimeout(j),j=setTimeout(function(){t(!0),E(b,!1),a&&I.afterResize()},400)},handleUpdate:function(){n.refresh(!1,!1)},handleResize:function(){n.refresh(!0,!1)},handleOrientation:function(){n.refresh(!0,!0)}},I=a.extend(I,d),t(!1),E(!1,!0),!0===v?f(s,!1,!0,!0):setTimeout(function(){l.calculateNearest(!0,!1)},200),o.length&&(l.init(),m.init(),w.on("resize",n.handleResize),c.addEventListener&&b.addEventListener("orientationchange",n.handleOrientation,!1))};return J.move=function(b){if(b===d)return!1;b.originalEvent&&(b=a(this).attr("href")),h(b,!1)},J.instantMove=function(a){if(a===d)return!1;h(a,!0)},J.next=function(){s<p.length&&(s+=1,f(s,!1,!0,!0))},J.previous=function(){s>0&&(s-=1,f(s,!1,!0,!0))},J.instantNext=function(){s<p.length&&(s+=1,f(s,!0,!0,!0))},J.instantPrevious=function(){s>0&&(s-=1,f(s,!0,!0,!0))},J.destroy=function(){if(!F)return!1;I.setHeights&&a(I.section).each(function(){a(this).css("height","auto")}),w.off("resize",n.handleResize),I.scrollbars&&(w.off("mousedown",l.handleMousedown),w.off("mouseup",l.handleMouseup),w.off("scroll",l.handleScroll)),w.off(H,l.wheelHandler),w.off("keydown",l.keyHandler),c.addEventListener&&I.touchScroll&&(c.removeEventListener("touchstart",m.touchHandler,!1),c.removeEventListener("touchmove",m.touchHandler,!1),c.removeEventListener("touchend",m.touchHandler,!1)),o=[],p=[],q=[],r=[]},J.update=function(){if(!F)return!1;n.handleUpdate()},J.current=function(){return q[s]},J.currentIndex=function(){return s},J.disable=function(){B=!0},J.enable=function(){B=!1,F&&l.calculateNearest(!1,!1)},J.isDisabled=function(){return B},J.setOptions=function(c){if(!F)return!1;"object"==typeof c?(I=a.extend(I,c),n.handleUpdate()):b.console&&console.warn("Scrollify warning: setOptions expects an object.")},a.scrollify=J,J});