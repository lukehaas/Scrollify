!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(c,a,a.document)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery"),a,a.document):b(jQuery,a,a.document)}("undefined"!=typeof window?window:this,function(a,b,c,d){"use strict";function E(c,d,i,l){if(j===c&&(i=!1),!0===w)return!0;if(f[c]){if(q=!1,i&&"function"==typeof D.before&&!1===D.before(c,g))return!0;if(k=1,B=e[c],!1===z&&j>c&&!1===l&&h[c]&&(k=parseInt(g[c].outerHeight()/o.height()),B=parseInt(e[c])+(g[c].outerHeight()-o.height())),D.updateHash&&D.sectionName&&(!0!==z||0!==c))if(history.pushState)try{history.replaceState(null,null,f[c])}catch(a){b.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else b.location.hash=f[c];if(z&&(D.afterRender(),z=!1),j=c,d)a(D.target).stop().scrollTop(B),i&&D.after(c,g);else{if(r=!0,a().velocity?a(D.target).stop().velocity("scroll",{duration:D.scrollSpeed,easing:D.easing,offset:B,mobileHA:!1}):a(D.target).stop().animate({scrollTop:B},D.scrollSpeed,D.easing),b.location.hash.length&&D.sectionName&&b.console)try{a(b.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(a){}a(D.target).promise().done(function(){r=!1,z=!1,i&&D.after(c,g)})}}}function F(a){function b(b){for(var c=0,d=a.slice(Math.max(a.length-b,1)),e=0;e<d.length;e++)c+=d[e];return Math.ceil(c/b)}return b(10)>=b(70)}function H(a,b){for(var c=f.length;c>=0;c--)"string"==typeof a?f[c]===a&&(i=c,E(c,b,!0,!0)):c===a&&(i=c,E(c,b,!0,!0))}var m,n,t,u,v,e=[],f=[],g=[],h=[],i=0,j=0,k=1,l=!1,o=a(b),p=o.scrollTop(),q=!1,r=!1,s=!1,w=!1,x=[],y=(new Date).getTime(),z=!0,A=!1,B=0,C="onwheel"in c?"wheel":c.onmousewheel!==d?"mousewheel":"DOMMouseScroll",D={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},G=function(d){function j(b){a().velocity?a(D.target).stop().velocity("scroll",{duration:D.scrollSpeed,easing:D.easing,offset:b,mobileHA:!1}):a(D.target).stop().animate({scrollTop:b},D.scrollSpeed,D.easing)}function z(b){b&&(p=o.scrollTop());var c=D.section;h=[],D.interstitialSection.length&&(c+=","+D.interstitialSection),!1===D.scrollbars&&(D.overflowScroll=!1),a(c).each(function(b){var c=a(this);D.setHeights?c.is(D.interstitialSection)?h[b]=!1:c.css("height","auto").outerHeight()<o.height()||"hidden"===c.css("overflow")?(c.css({height:o.height()}),h[b]=!1):(c.css({height:c.height()}),D.overflowScroll?h[b]=!0:h[b]=!1):c.outerHeight()<o.height()||!1===D.overflowScroll?h[b]=!1:h[b]=!0}),b&&o.scrollTop(p)}function B(c,d){var h=D.section;D.interstitialSection.length&&(h+=","+D.interstitialSection),e=[],f=[],g=[],a(h).each(function(c){var d=a(this);e[c]=c>0?parseInt(d.offset().top)+D.offset:parseInt(d.offset().top),D.sectionName&&d.data(D.sectionName)?f[c]="#"+d.data(D.sectionName).toString().replace(/ /g,"-"):!1===d.is(D.interstitialSection)?f[c]="#"+(c+1):(f[c]="#",c===a(h).length-1&&c>1&&(e[c]=e[c-1]+(parseInt(a(a(h)[c-1]).outerHeight())-parseInt(a(b).height()))+parseInt(d.outerHeight()))),g[c]=d;try{a(f[c]).length&&b.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(a){}b.location.hash===f[c]&&(i=c,l=!0)}),!0===c&&E(i,!1,!1,!1)}function G(){return!h[i]||!((p=o.scrollTop())>parseInt(e[i]))}function H(){return!h[i]||!((p=o.scrollTop())<parseInt(e[i])+(g[i].outerHeight()-o.height())-28)}A=!0,a.easing.easeOutExpo=function(a,b,c,d,e){return b==e?c+d:d*(1-Math.pow(2,-10*b/e))+c},t={handleMousedown:function(){if(!0===w)return!0;q=!1,s=!1},handleMouseup:function(){if(!0===w)return!0;q=!0,s&&t.calculateNearest(!1,!0)},handleScroll:function(){if(!0===w)return!0;m&&clearTimeout(m),m=setTimeout(function(){if(s=!0,!1===q)return!1;q=!1,t.calculateNearest(!1,!0)},200)},calculateNearest:function(a,b){p=o.scrollTop();for(var h,c=1,d=e.length,f=0,g=Math.abs(e[0]-p);c<d;c++)(h=Math.abs(e[c]-p))<g&&(g=h,f=c);(H()&&f>i||G())&&(i=f,E(f,a,b,!1))},wheelHandler:function(c){if(!0===w)return!0;if(D.standardScrollElements&&(a(c.target).is(D.standardScrollElements)||a(c.target).closest(D.standardScrollElements).length))return!0;h[i]||c.preventDefault();var d=(new Date).getTime();c=c||b.event;var f=c.originalEvent.wheelDelta||-c.originalEvent.deltaY||-c.originalEvent.detail,g=Math.max(-1,Math.min(1,f));if(x.length>149&&x.shift(),x.push(Math.abs(f)),d-y>200&&(x=[]),y=d,r)return!1;if(g<0){if(i<e.length-1&&H()){if(!F(x))return!1;c.preventDefault(),i++,r=!0,E(i,!1,!0,!1)}}else if(g>0&&i>0&&G()){if(!F(x))return!1;c.preventDefault(),i--,r=!0,E(i,!1,!0,!1)}},keyHandler:function(a){return!0===w||!0!==r&&void(38==a.keyCode||33==a.keyCode?i>0&&G()&&(a.preventDefault(),i--,E(i,!1,!0,!1)):40!=a.keyCode&&34!=a.keyCode||i<e.length-1&&H()&&(a.preventDefault(),i++,E(i,!1,!0,!1)))},init:function(){D.scrollbars?(o.on("mousedown",t.handleMousedown),o.on("mouseup",t.handleMouseup),o.on("scroll",t.handleScroll)):a("body").css({overflow:"hidden"}),o.on(C,t.wheelHandler),o.on("keydown",t.keyHandler)}},u={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(b){if(!0===w)return!0;if(D.standardScrollElements&&(a(b.target).is(D.standardScrollElements)||a(b.target).closest(D.standardScrollElements).length))return!0;var c;if(void 0!==b&&void 0!==b.touches)switch(c=b.touches[0],b.type){case"touchstart":u.touches.touchstart.y=c.pageY,u.touches.touchmove.y=-1,u.touches.touchstart.x=c.pageX,u.touches.touchmove.x=-1,u.options.timeStamp=(new Date).getTime(),u.touches.touchend=!1;case"touchmove":u.touches.touchmove.y=c.pageY,u.touches.touchmove.x=c.pageX,u.touches.touchstart.y!==u.touches.touchmove.y&&Math.abs(u.touches.touchstart.y-u.touches.touchmove.y)>Math.abs(u.touches.touchstart.x-u.touches.touchmove.x)&&(b.preventDefault(),u.touches.direction="y",u.options.timeStamp+u.options.timeGap<(new Date).getTime()&&0==u.touches.touchend&&(u.touches.touchend=!0,u.touches.touchstart.y>-1&&Math.abs(u.touches.touchmove.y-u.touches.touchstart.y)>u.options.distance&&(u.touches.touchstart.y<u.touches.touchmove.y?u.up():u.down())));break;case"touchend":!1===u.touches[b.type]&&(u.touches[b.type]=!0,u.touches.touchstart.y>-1&&u.touches.touchmove.y>-1&&"y"===u.touches.direction&&(Math.abs(u.touches.touchmove.y-u.touches.touchstart.y)>u.options.distance&&(u.touches.touchstart.y<u.touches.touchmove.y?u.up():u.down()),u.touches.touchstart.y=-1,u.touches.touchstart.x=-1,u.touches.direction="undetermined"))}},down:function(){i<e.length-1&&(H()&&i<e.length-1?(i++,E(i,!1,!0,!1)):Math.floor(g[i].height()/o.height())>k?(j(parseInt(e[i])+o.height()*k),k+=1):j(parseInt(e[i])+(g[i].outerHeight()-o.height())))},up:function(){i>=0&&(G()&&i>0?(i--,E(i,!1,!0,!1)):k>2?(k-=1,j(parseInt(e[i])+o.height()*k)):(k=1,j(parseInt(e[i]))))},init:function(){c.addEventListener&&D.touchScroll&&(c.addEventListener("touchstart",u.touchHandler,!1),c.addEventListener("touchmove",u.touchHandler,!1),c.addEventListener("touchend",u.touchHandler,!1))}},v={refresh:function(a,b){clearTimeout(n),n=setTimeout(function(){z(!0),B(b,!1),a&&D.afterResize()},400)},handleUpdate:function(){v.refresh(!1,!1)},handleResize:function(){v.refresh(!0,!1)},handleOrientation:function(){v.refresh(!0,!0)}},D=a.extend(D,d),z(!1),B(!1,!0),!0===l?E(i,!1,!0,!0):setTimeout(function(){t.calculateNearest(!0,!1)},200),e.length&&(t.init(),u.init(),o.on("resize",v.handleResize),c.addEventListener&&b.addEventListener("orientationchange",v.handleOrientation,!1))};return G.move=function(b){if(b===d)return!1;b.originalEvent&&(b=a(this).attr("href")),H(b,!1)},G.instantMove=function(a){if(a===d)return!1;H(a,!0)},G.next=function(){i<f.length&&(i+=1,E(i,!1,!0,!0))},G.previous=function(){i>0&&(i-=1,E(i,!1,!0,!0))},G.instantNext=function(){i<f.length&&(i+=1,E(i,!0,!0,!0))},G.instantPrevious=function(){i>0&&(i-=1,E(i,!0,!0,!0))},G.destroy=function(){if(!A)return!1;D.setHeights&&a(D.section).each(function(){a(this).css("height","auto")}),o.off("resize",v.handleResize),D.scrollbars&&(o.off("mousedown",t.handleMousedown),o.off("mouseup",t.handleMouseup),o.off("scroll",t.handleScroll)),o.off(C,t.wheelHandler),o.off("keydown",t.keyHandler),c.addEventListener&&D.touchScroll&&(c.removeEventListener("touchstart",u.touchHandler,!1),c.removeEventListener("touchmove",u.touchHandler,!1),c.removeEventListener("touchend",u.touchHandler,!1)),e=[],f=[],g=[],h=[]},G.update=function(){if(!A)return!1;v.handleUpdate()},G.current=function(){return g[i]},G.disable=function(){w=!0},G.enable=function(){w=!1,A&&t.calculateNearest(!1,!1)},G.isDisabled=function(){return w},G.setOptions=function(c){if(!A)return!1;"object"==typeof c?(D=a.extend(D,c),v.handleUpdate()):b.console&&console.warn("Scrollify warning: setOptions expects an object.")},a.scrollify=G,G});
